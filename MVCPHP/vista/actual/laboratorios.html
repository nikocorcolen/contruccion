<!--
To change this template, choose Tools | Templates
and open the template in the editor.
-->
<!DOCTYPE html>
<html>
    <head>
        <title>Laboratorios</title>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
        
    <link href="styles/kendo.common.min.css" rel="stylesheet">
    <link href="styles/kendo.rtl.min.css" rel="stylesheet">
    <link href="styles/kendo.default.min.css" rel="stylesheet">
    
    <link rel="stylesheet" href="../../js/scripts/samples/sample.css">
   
<script type="text/javascript"></script>
                        
    <script src="js/jquery.min.js"></script>
    <script src="js/kendo.web.min.js"></script>
    <script src="examples/content/shared/js/console.js"></script>
    <script>
        
    </script>
    
        
    </head>
    <body>  
    <script type="text/javascript">
        $(document).on("click", "#boton_agregar",agregarFila);
        function agregarFila()
        {
                 
                var d = '<tr>'; //inicio de tabla

                    d= d + '<td>';
                    d= d + '<input style="width:100%;" class="k-input k-textbox" type="text" id="nombre_1" name="nombre_1">';
                    d= d + '</td>';
                    d= d + '<td>';
                    d= d + '<input style="width:100%;" class="k-input k-textbox" type="text" id="cargo_1" name="cargo_1" readonly>';
                    d= d + '</td>';
                    d= d + '<td>';
                    d= d + '<a id="boton_eliminar" name="boton_eliminar"  class="k-button" ><span class="k-icon k-i-cancel"></span></a>';
                    d= d + '</td>';

                d = d + '</tr>'; //fin de tabla

                $("table#asignar_usuario tr:last").after( d);
        }
        $(document).on("click", "#boton_eliminar",function()           
        {
            $(this).closest("tr").remove();
        });

        
                
            
    </script>  

    

        <div id="example" class="k-content">
          
                <div id="grid" style="height: 380px;"></div>

            <!-- TEMPLATE POPUP   -->
            <script id="popup_editor" type="text/x-kendo-template">
            <div style="margin: 10px auto 15px 100px; width:800px ">
            
            <div style="margin-right: 30px;" class="k-edit-label">
                <label for="nombre">Nombre</label>
                
            </div>
            <input   style="margin-bottom: 5px; width:50%" type="text" class="k-input k-textbox" name="nombre" data-bind="value:nombre">
            
             

            
            
            <div class="k-content" >
            <textarea data-role="editor" 
            data-tools="[          'bold',
                                   'italic',
                                   'underline',
                                   'strikethrough',
                                   'justifyLeft',
                                   'justifyCenter',
                                   'justifyRight',
                                   'justifyFull']"

             cols="80" id="descripcion" rows="10"  name="descripcion" data-bind="value:descripcion"></textarea>
             </div>
             <!-- Tabla PAra ingresar Usuarios -->
             <table style="width: 800px" id="asignar_usuario">
                            <thead>
                                 <tr>
                                    <th>Nombre</th>                       
                                    <th>Cargo</th>
                                    <th> <a class="k-button" id="boton_agregar" name="boton_agregar"><span class="k-icon k-i-plus"></span></a></th>           
                                 </tr>
                            </thead>
                            <tbody align="center">
                                <tr>
                                    <td>                                 
                                        <input style="width:100%;" class="k-input k-textbox" type="text" id="nombre_1" name="nombre_1">                
                                    </td>                       
                                    <td>                                                             
                                        <input style="width:100%;" class="k-input k-textbox" type="text" id="cargo_1" name="cargo_1" readonly>                                               
                                    </td>
                                    <td>  
                                    <a id="boton_eliminar" name="boton_eliminar" class="k-button" ><span class="k-icon k-i-cancel"></span></a>                                  
                                        

                                    </td>                   
                                </tr>
                            </tbody>
                        </table>
           

        

            </div>
            </script>
                
<!-- KENDO GRID TABLA PRICIPAL -->
            <script>

           
                
                $(document).ready(function() 
                {

                        var grid = $("#grid").kendoGrid({
                        dataSource: {
                            data:{url:"datos.php", dataType:"JSON"},
                            transport: {
                                read: {
                                    url: "datos.php",
                                    dataType: "JSON"
                                },
                                create: {
                                    url: function (options) {
                                        
                                        return "crear.php?nombre=" + options.models[0].nombre + "&descripcion=" + options.models[0].descripcion;
                                    },
                                    type: "POST",
                                    complete: function(){
                                        $("#grid").data("kendoGrid").dataSource.read();
                                    }
                                },

                                update: {
                                    url: function(options){
                                        return "update.php?ID=" + options.models[0].ID + "&nombre=" + options.models[0].nombre + "&descripcion=" + options.models[0].descripcion;
                                    },
                                    type: "POST",
                                    dataType: "json"
                                },

                                destroy: {
                                    url: function (options) {
                                        return "eliminar.php?ID=" + options.models[0].ID;
                                    },
                                    type: "POST"
                                },
                                parameterMap: function(options, operation) {
                                }

                                
                            },
                            autoBind: true,
                            batch: true,
                            pageSize: 20,
                            schema: {
                                model: {
                                    id: "ID",
                                    fields: {
                                        ID: { editable: false, nullable: true },
                                        nombre: { validation: { required: {message: "Nombre es requerido"} } },
                                        descripcion: { validation: { required: {message: "Descripcion es requerido"} } }
                                    }
                                }
                            }
                        },
                        toolbar: [{name: "create" , text: "Crear Nuevo" }],
                        sortable: true,
                        pageable: {
                            refresh: true,
                            pageSizes: true
                        },
                        columns: [ {
                                hidden: true,
                                field: "ID",
                                width: 80,
                                title: "ID"
                            } , {
                                field: "nombre",
                                width: 80,
                                title: "Nombre"
                            } , {
                                hidden: true,
                                field: "descripcion",
                                width: 80,
                                title: "Descripcion"
                            }, 
                            {
                                width: 100,
                                command: [
                                    {name: "edit", text: {edit: "Editar",update: "Actualizar", cancel: "Cancelar"}},
                                    {name:"destroy", text: "Eliminar"}
                                ]
                            } 
                        ],

                        editable: {mode: "popup", confirmation: "¿Esta seguro que desea eliminar este registro?",
                            window :{title: "Edición", width:1000},
                            template: kendo.template($("#popup_editor").html())}
                            

                    });

                   
                 
                });
                

                    
            
            </script>
            



           

        </div>
    </body>
</html>
